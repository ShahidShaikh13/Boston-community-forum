<div class="mb-6">
  <div class="flex items-center justify-between mb-4">
    <div>
      <h1><%= @category.name %></h1>
      <p class="text-muted"><%= @category.description %></p>
    </div>
    
    <%= link_to categories_path, class: "btn btn-secondary btn-sm" do %>
      <i class="fas fa-arrow-left"></i>
      Back to Categories
    <% end %>
  </div>
</div>

<div class="mb-6">
  <div class="card">
    <div class="flex items-center justify-between">
      <div>
        <h3 class="text-lg font-semibold">Posts in <%= @category.name %></h3>
        <p class="text-muted"><%= pluralize(@posts.total_count, 'post') %> found</p>
      </div>
      
      <% if user_signed_in? %>
        <%= link_to new_post_path, class: "btn btn-primary" do %>
          <i class="fas fa-plus"></i>
          New Post
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<% if @posts.any? %>
  <div class="space-y-4">
    <% @posts.each do |post| %>
      <div class="card">
        <div class="card-header">
          <div class="flex items-center gap-2">
            <span class="college-badge">
              <i class="fas fa-university"></i>
              <%= post.user.college %>
            </span>
          </div>
          
          <% if user_signed_in? && post.user == current_user %>
            <div class="flex gap-2">
              <%= link_to edit_post_path(post), class: "btn btn-secondary btn-sm" do %>
                <i class="fas fa-edit"></i>
                Edit
              <% end %>
              <%= button_to post_path(post), method: :delete, 
                  class: "btn btn-danger btn-sm", 
                  data: { confirm: "Are you sure?" } do %>
                <i class="fas fa-trash"></i>
                Delete
              <% end %>
            </div>
          <% end %>
        </div>
        
        <h2 class="card-title">
          <%= link_to post.title, post_path(post), class: "hover:text-primary-color" %>
        </h2>
        
        <div class="card-meta">
          <span>
            <i class="fas fa-user"></i>
            <%= post.user.display_name %>
          </span>
          <span>
            <i class="fas fa-clock"></i>
            <%= time_ago_in_words(post.created_at) %> ago
          </span>
          <span>
            <i class="fas fa-comments"></i>
            <%= post.comments_count %> comments
          </span>
        </div>
        
        <div class="card-content">
          <%= post.excerpt %>
        </div>
        
        <div class="mt-4">
          <%= link_to "Read More", post_path(post), class: "btn btn-primary btn-sm" %>
        </div>
      </div>
    <% end %>
  </div>
  
  <!-- Pagination -->
  <div class="pagination">
    <%= paginate @posts %>
  </div>
<% else %>
  <div class="card text-center py-12">
    <i class="fas fa-folder-open text-4xl text-muted mb-4"></i>
    <h3 class="text-xl font-semibold mb-2">No posts in this category</h3>
    <p class="text-muted mb-4">Be the first to create a post in <%= @category.name %>!</p>
    <% if user_signed_in? %>
      <%= link_to new_post_path, class: "btn btn-primary" do %>
        <i class="fas fa-plus"></i>
        Create First Post
      <% end %>
    <% end %>
  </div>
<% end %>
